<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_account_bank_journal_form_banking_common" model="ir.ui.view">
        <field name="name">account.bank.journal.form.banking.common</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="account.view_account_bank_journal_form"/>
        <field name="arch" type="xml">

            <xpath expr="//form/sheet/group[1]/group[last()]" position="after">
                <group colspan="4" string="Conti di portafoglio" >
                    <group colspan="4">
                        <field name="has_children" invisible="1"/>
                        <field name="is_wallet" attrs="{'invisible': [('type', 'not in', ['bank', 'cash'])], 'readonly':[('has_children', '=', True)]}"/>
                        <field name="wallet_ids" attrs="{'invisible': ['|', ('is_wallet', '=', True), ('type', 'not in', ['bank', 'cash'])]}">
                        <tree>
                            <field name="name" />
                            <field name="type" />
                            <field name="bank_acc_number" />
                        </tree>
                        </field>
                        <field name="main_bank_account_id" attrs="{'required': [('is_wallet', '=', True)], 'invisible': [('is_wallet', '=', False)]}"/>
                    </group>
                </group>
            </xpath>

        </field>
    </record>
</odoo>

